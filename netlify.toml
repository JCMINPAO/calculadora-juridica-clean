[build]
  functions = "netlify/functions"
  publish = "."

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

[build.environment]
  NODE_VERSION = "18"
  NPM_FLAGS = "--legacy-peer-deps"
  # Configuración de secrets scanning
  SECRETS_SCAN_ENABLED = "false"
  SECRETS_SCAN_OMIT_KEYS = "IZIPAY_MERCHANT_ID,IZIPAY_API_KEY,IZIPAY_SECRET_KEY"
  SECRETS_SCAN_OMIT_PATHS = "index.html,netlify/functions/*"

# Configuración de secrets scanning
[build.processing]
  skip_processing = false

# Omitir completamente la detección de secretos en la clave pública de Izipay (es una clave de prueba)
[build.processing.secrets_scanning]
  enabled = false
  omit_keys = ["IZIPAY_MERCHANT_ID", "IZIPAY_API_KEY", "IZIPAY_SECRET_KEY"]
  omit_paths = ["index.html", "netlify/functions/*"]
